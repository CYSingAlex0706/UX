<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" >
    <title>伊利討論區 - 休閒聊天</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
    <style>

        .container {
            display: flex;
            width: 95%;
            margin:  auto;
            background-color: white;
            border: 1px solid #ccc;
        }
        .sidebar {
            width: 150px;
            background-color: #a1a2c5;
            padding: 20px;
        }
        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }
        .sidebar li {
            margin-bottom: 10px;
        }
        .content {
            flex-grow: 1;
            padding: 20px;
        }
        h1 {
            margin-top: 0;
            color: #333;
        }
        .form-group {
            margin-bottom: 15px;
            position: relative;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="password"],
        input[type="email"],
        select {
            width: 250px;
            padding: 5px;
            border: 1px solid #ccc;
        }
        .required {
            color: red;
        }
        .info {
            font-size: 0.9em;
            color: #666;
        }
        .button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
        }
        .email-status {
            background-color: #ffffd9;
            border: 1px solid #e6db55;
            padding: 10px;
            margin-top: 5px;
        }
        .error-message {
            color: red;
            position: absolute;
            left: 400px;
            top: 5px;
            width: 180px;
        }
    </style>
<body>
<div id="page">
    <div class="header">
        <a href="Home.html" class="thread-title-link">
            <img src="image/eyny icon.png" width="150" height="80">
        </a>
        <div class="logo">伊利討論區</div>
        <div class="user-info">
            <span class="user-profile">
                <span><img src="image/user.png" width="20" height="20">Mr.Chan</span>
                <a href="Myfavo.html" class="thread-title-link">
                    <span>我的最愛</span>
                </a>
            </span>

            <span><img src="image/setting.png" width="20" height="20">設定</span>
            <span>登出</span>
        </div>
    </div>
    <div class="container">
        <div class="sidebar">
            <ul>
                <a href="profile.html"><li>個人空間</li></a>
                <li>修改頭像</li>
                <li>積分</li>
                <li>用戶組</li>
                <li>隱私前題</li>
                <li>郵件提醒</li>
                <li><strong>密碼安全</strong></li>
            </ul>
        </div>
        <div class="content">
            <h1>設置 - 密碼安全</h1>
            <p>您必須填寫原密碼才能修改下面的資料。</p>
            <form id="passwordForm">
                <div class="form-group">
                  <label for="currentPassword">原密碼 <span class="required">***</span></label>
                  <input type="password" id="currentPassword" value="••••••">
                  <p class="info">修改密碼、密碼或 Email 都需要</p>
                  <p class="info required">必須 *** 設定(建立)安全提問 和 回答 *** 才能親手完成主題。</p>
                  <p class="info">設定完成後請重新登錄始能返回論壇首頁即可正常使用</p>
                </div>
              
                <div class="form-group">
                  <label for="newPassword">新密碼</label>
                  <input type="password" name="newPassword" id="newPassword">
                  <p class="info">如不需要更改密碼，此處請留空</p>
                </div>
              
                <div class="form-group">
                  <label for="confirmPassword">確認新密碼</label>
                  <input type="password" name="confirmPassword" id="confirmPassword">
                  <p class="info">如不需要更改密碼，此處請留空</p>
                  <span class="error-message" id="passwordError"></span>
                </div>
              
                <div class="form-group">
                  <label for="email">Email</label>
                  <input type="email" id="email" value="sam27049221@gmail.com">
              
                  <div class="email-status">
                    郵箱驗證(sam27049221@gmail.com)等待驗證中...
                    <p>系統已經向新郵箱發送了一封驗證郵件，請查收郵件，確認收到後，進行驗證就會。</p>
                    <p>如果沒有收到驗證郵件，您可以再提交一次新郵箱，或者重新接收驗證郵件</p>
                    <p>如果改地址，系統將郵寄您的密碼重置驗證資訊到新的。請慎用</p>
                  </div>
                </div>
              
                <div class="form-group">
                  <label for="securityQuestion">安全提問 <span class="required">***</span></label>
                  <select id="securityQuestion">
                    <option>保持預設的安全提問和答案</option>
                  </select>
                  <p class="info">如果您啟用安全提問，登錄時需填入相應的項目才能登錄</p>
                </div>
              
                <div class="form-group">
                  <label for="securityAnswer">回答 <span class="required">***</span></label>
                  <input type="text" id="securityAnswer">
                  <p class="info">如果設置新的安全提問，請在此輸入答案</p>
                </div>
              
                <button type="submit" class="button">保存</button>
              </form>
        </div>
    </div>

        <div class="footer">
            <span>Powered by Discuz!</span>
            <span>© Comsenz Inc.</span>
            <div>
                <a href="#">Archiver</a>
                <a href="#">手機版</a>
                <a href="#">廣告</a>
                <a href="#">聯絡我們</a>
                <a href="#">廣告查詢</a>
                <a href="#">廠商合作</a>
                <a href="#">伊莉</a>
            </div>
            <div class="timestamp">
                GMT+8, 2024-8-29 12:21 AM
            </div>
        </div>
        <div class="disclaimer">
            <p>重要聲明：本討論區是以即時上載留言的方式運作，對所有留言的真實性、完整性及立場等，不負任何法律責任。而一切留言之言論只代表留言者個人意見，並非本網站之立場，用戶不應信賴內容，並應自行判斷內容之真實性。於有關情形下，用戶應尋求專業意見(如涉及醫療、法律或投資等問題)。由於本討論區受到「即時留言」運作方式所規限，故不能完全監察所有留言，若讀者發現有留言出現問題，請聯絡我們。有權删除任何留言及拒絕任何人士留言，同時亦有不刪除留言的權利。切勿撰寫粗言穢語、誹謗、渲染色情暴力或人身攻擊的言論，敬請自律。本網站保留一切法律權利。</p>
        </div>
</div>
    <div id="backToTop">Back<br>To Top</div>
    

<script>
    // Get the button
    var backToTopButton = document.getElementById("backToTop");

    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function() {scrollFunction()};

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            backToTopButton.style.display = "block";
        } else {
            backToTopButton.style.display = "none";
        }
    }

    // Smooth scroll to top function
    function scrollToTop(duration) {
        // Cancel if already at top
        if (document.scrollingElement.scrollTop === 0) return;

        const totalScrollDistance = document.scrollingElement.scrollTop;
        let scrollY = totalScrollDistance, oldTimestamp = null;

        function step(newTimestamp) {
            if (oldTimestamp !== null) {
                // if duration is 0 scrollY will be -Infinity
                scrollY -= totalScrollDistance * (newTimestamp - oldTimestamp) / duration;
                if (scrollY <= 0) return document.scrollingElement.scrollTop = 0;
                document.scrollingElement.scrollTop = scrollY;
            }
            oldTimestamp = newTimestamp;
            window.requestAnimationFrame(step);
        }
        window.requestAnimationFrame(step);
    }

    // When the user clicks on the button, scroll to the top of the document
    backToTopButton.onclick = function() {
        scrollToTop(200); // 500ms duration for the scrolling animation
    }

    <!--///////////////////////////////////-->
    
    document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('passwordForm');
  const newPassword = document.getElementById('newPassword');
  const confirmPassword = document.getElementById('confirmPassword');
  const passwordError = document.getElementById('passwordError');

  function clearCustomValidity() {
    newPassword.setCustomValidity('');
    confirmPassword.setCustomValidity('');
  }

  function verifyPasswords() {
    clearCustomValidity(); // Clear any previous custom validity

    const password = newPassword.value;
    const confirm = confirmPassword.value;
    
    if (password === '' && confirm === '') {
      // Both fields are empty, consider it valid (no password change)
      passwordError.textContent = '';
      return true;
    }
    
    if (password === confirm) {
      window.location.href = 'success.html';
      return true;
    } else {
      passwordError.textContent = '密碼不匹配';
      passwordError.scrollIntoView({ behavior: 'smooth', block: 'center' });
      return false;
    }
  }

  // Clear custom validity on input to ensure fresh check on next submit
  newPassword.addEventListener('input', clearCustomValidity);
  confirmPassword.addEventListener('input', clearCustomValidity);

  form.addEventListener('submit', function(event) {
    event.preventDefault(); // Always prevent default form submission
    verifyPasswords();
    
  });
});
</script>

</body>
</html>